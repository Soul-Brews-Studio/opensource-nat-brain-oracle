# Plugin System Debugging

**Time**: 10:43 GMT+7

## What We Learned

- **SessionStart hooks ไม่ stable** — Format ถูกแล้วแต่ content ไม่ inject เข้า Claude
- **Plugin install บอก success แต่ไม่เห็นผล** — installed_plugins.json ไม่ update
- **`${CLAUDE_PLUGIN_ROOT}` อาจไม่ถูก set** — ต้อง debug เพิ่ม
- **Simpler approach needed** — curl + download อาจดีกว่า hook system

## How Things Connect

- **SessionStart hook** → ควร inject content → แต่ Claude ไม่เห็น Oracle philosophy
- **Plugin marketplace** → install สำเร็จ → แต่ไม่ load hooks/commands
- **curl approach** → สร้าง /oracle-init command → download files โดยตรง

## Key Discoveries

- hooks.json format: `{"hooks": {"SessionStart": [...]}}` ไม่ใช่ `{"hooks": [{"matcher": ...}]}`
- Plugin commands ต้อง register ใน plugin.json: `"commands": "../commands"`
- SessionStart hook stdout ควร inject เป็น context แต่ไม่เวิร์คในทางปฏิบัติ

## Attempts Made

1. ✅ Fixed hooks.json format (SessionStart without matcher)
2. ✅ Added `${CLAUDE_PLUGIN_ROOT}` path
3. ✅ Reinstalled plugin
4. ❌ Still no Oracle philosophy in Claude
5. ✅ Created /oracle-init command as alternative
6. ⏳ Testing curl-based approach

## Commits
- `3a8863c` feat: add /oracle-init command to download philosophy via curl
- `e681a29` fix: nat-data-personal hooks.json format for SessionStart injection

## Tags
`plugin` `hooks` `SessionStart` `debugging` `oracle` `curl`

## Raw Thoughts

- Plugin system ดู complex เกินไปสำหรับ simple use case
- curl + download อาจเป็น workaround ที่ดี
- ต้องหาวิธี make plugin commands visible
- อาจต้อง check plugin loading logs
- ถ้า /oracle-init ไม่เห็น อาจต้อง debug plugin registration

## Next Steps

- [ ] Test /oracle-init หรือ /nat-data-personal:oracle-init
- [ ] ถ้าไม่เวิร์ค ลอง manual curl ก่อน
- [ ] Document working approach
