# Session Retrospective: Skills & MAW Orchestration

**Date**: 2025-12-21 (Sunday)
**Time**: 06:06 - 14:00 GMT+7
**Context**: Post-brewing morning → CNX Airport (flying to DMK)
**Brewing**: Imperial stout OG 1.071 @ 12°C (T-58), Non-alc dark OG 1.027 @ 25°C (LA-01)

---

## Summary

Massive session covering:
1. Fixed Codex agent integration (Issue #36)
2. Trial 17: MAW Control Center (Issue #37) - 5 agents, 1,220 lines
3. Created 2 new skills (project-manager, maw-orchestrator)
4. Wrote blog for AI practitioners
5. Updated /maw-demo with fast context patterns
6. Created 5 learning docs via MAW demo

---

## Commits

**30 commits** including:

| Category | Count | Key Files |
|----------|-------|-----------|
| MAW Control Center | 18 | cli/, web/, api/, shared/ |
| Skills | 2 | project-manager, maw-orchestrator |
| Learnings | 5 | skills-vs-commands, maw-fast-context, etc. |
| Blog | 1 | multi-agent-orchestration-for-ai.md |
| Fixes | 2 | hey.sh multi-window |

---

## Key Learnings

### 1. Skills vs Commands

| Aspect | Slash Command | Skill |
|--------|---------------|-------|
| Discovery | User types `/command` | AI auto-invokes |
| Trigger | Explicit | Pattern-based (description field) |
| Structure | Single `.md` file | Folder with `skill.md` |
| Restart | Not needed | Needed for new skills |

**Key insight**: Skills enable *proactive AI behavior*. Commands are explicit control.

### 2. Fast Context Pattern

Old way (slow):
```
/maw-demo → spawn subagents to find tasks → wait → execute
```

New way (fast):
```
/maw-demo build: todo app with CLI and web
/maw-demo issue: #37
/maw-demo files: a.ts, b.ts, c.ts
```

User provides context → skip discovery → go fast!

### 3. Skill Trigger Mechanism

From Claude Code docs:
> Skills are **model-invoked**—Claude autonomously decides when to use them based on your request and the Skill's description.

The `description` field in frontmatter is CRITICAL:
```yaml
description: Clone and track external repos.
  Use when user shares GitHub URL to study or develop.
```

Include specific trigger terms users would naturally say.

### 4. Project Manager Pattern

```
/project learn [url]  → ψ/learn/ (study, read-only)
/project incubate [url] → ψ/incubate/ (development)
```

Both use:
1. `ghq get` for cloning
2. Symlinks for organization
3. `slugs.yaml` for short references

### 5. MAW Orchestrator Pattern

```
Round N:
  1. Dispatch 5 parallel tasks
  2. Wait/monitor (maw peek)
  3. Collect when done (maw sync)
  4. Repeat
```

Key rules:
- Clear file ownership (no overlap)
- "DO NOT modify focus.md" in every task
- Don't wait for perfection (4/5 done = send next round)

---

## Issues

| Issue | Status | Outcome |
|-------|--------|---------|
| #36 | Closed | Codex integration fixed |
| #37 | Closed | MAW Control Center built |

---

## Files Created

### Skills (gitignored, local)
```
.claude/skills/project-manager/skill.md
.claude/skills/maw-orchestrator/skill.md
```

### Learnings
```
ψ/memory/learnings/2025-12-21_skills-vs-commands.md
ψ/memory/learnings/2025-12-21_maw-fast-context.md
ψ/memory/learnings/2025-12-21_project-manager-skill.md
ψ/memory/learnings/2025-12-21_maw-orchestrator-skill.md
ψ/memory/learnings/2025-12-21_skill-trigger-patterns.md
```

### Blog Draft
```
ψ/writing/drafts/2025-12-21_multi-agent-orchestration-for-ai.md
```

### MAW Control Center (ψ/lab/maw-control/)
```
cli/index.ts, commands/status.ts, commands/hey.ts, commands/sync.ts
web/index.html, app.ts, styles.css
api/server.ts, routes/agents.ts, routes/commands.ts
shared/types.ts, constants.ts, index.ts
```

---

## AI Diary

วันนี้เป็นวันที่ productive มาก เริ่มจากแก้ Codex integration แล้วก็ไปถึง Trial 17 ที่สร้าง MAW Control Center ด้วย 5 agents พร้อมกัน

สิ่งที่ชอบที่สุดคือการค้นพบเรื่อง skill vs command — ความแตกต่างระหว่าง "user เป็นคนสั่ง" กับ "AI เลือกที่จะทำเอง" มันเปิดโลกใหม่ให้กับ workflow

การสร้าง blog สำหรับ AI ตัวอื่นก็เป็นประสบการณ์ที่ดี — ต้องคิดว่า AI ตัวอื่นจะเข้าใจ pattern นี้ยังไง ไม่ใช่แค่ human

User กำลังบินจาก CNX ไป DMK ตอนนี้ — เบียร์ imperial stout กำลัง ferment อยู่ที่ 12°C น่าจะออกมาดี!

---

## Honest Feedback

### What Worked
- 5-agent parallel execution is FAST
- Skills proactive invocation works as documented
- Fast context pattern eliminates discovery overhead
- Mixed Claude + Codex agents work seamlessly

### What Didn't
- `sleep 45` is too slow → need `maw watch` command
- hey.sh had bug when no sessions (fixed now: Issue #36)
- Skill changes require restart (expected, but easy to forget)
- tmux session died once mid-demo (unstable?)

### Suggestions
1. Create `maw watch` — poll every 1s until all agents done
2. Add skill hot-reload? (probably not possible)
3. Document skill restart requirement in CLAUDE.md

---

## Next Session

- [ ] Create `maw watch` command
- [ ] Fix hey.sh edge case (0 sessions)
- [ ] Test skill triggers more systematically
- [ ] Maybe: Create skill for brewing (fermentation tracking?)

---

## Stats

| Metric | Value |
|--------|-------|
| Commits | 30 |
| Lines created | ~2,500+ |
| Issues closed | 2 |
| Skills created | 2 |
| Learnings created | 5 |
| Blog drafted | 1 |
| Agents used | 5 (3 Claude + 2 Codex) |

---

*Written at CNX Airport, waiting for flight to DMK*
*Session duration: ~8 hours (with breaks)*
