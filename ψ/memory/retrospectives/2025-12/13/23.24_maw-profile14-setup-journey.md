# Retrospective: MAW Profile14 Setup Journey

> **Session**: 23:04 - 23:24 (20 minutes)
> **Date**: Saturday 13 December 2025
> **Focus**: Copy MAW setup from 000-workshop-product-page to Nat-s-Agents

---

## Timeline

| Time | Event | Outcome |
|------|-------|---------|
| 23:04 | /recap - Fresh context | Got MAW status from previous session |
| 23:05 | /trace maw - Find all files | 5 parallel subagents traced locations |
| 23:06 | Discovered 000-workshop has more | Profile14, 6-agent config, scripts |
| 23:08 | Tried `maw hey all` | Working! Session already running |
| 23:10 | Copied profiles 10-14 | Added to .agents/profiles/ |
| 23:11 | Subagent analyzed 000 vs ours | Found critical gaps |
| 23:14 | Copied critical scripts | maw-wrapper, wait-agents-fast, etc. |
| 23:16 | Tried `maw kill` | **HUNG** - has y/N prompt |
| 23:17 | User said never kill | Tried to work with existing session |
| 23:18 | User said kill please | Tried `maw kill` again - hung again |
| 23:19 | Subagent used `tmux kill-session` | **SUCCESS** - direct tmux works |
| 23:20 | Started profile14 | Only 1 window, 3 panes (wrong!) |
| 23:21 | Realized start-agents.sh missing | Layout code not in our script |
| 23:21 | Copied start-agents.sh from 000 | Now has profile14 layout support |
| 23:22 | Restarted profile14 | **SUCCESS** - 2 windows × 3 panes |
| 23:22 | Documented mistakes | Created learnings file |
| 23:23 | Updated WIP | Full status documented |
| 23:24 | rrr - This retrospective | Capturing the journey |

---

## What Happened

### The Goal
Copy MAW multi-agent setup from `000-workshop-product-page` (a working reference) to `Nat-s-Agents` (this repo). Specifically wanted **Profile14**: 2 tmux windows with 3 horizontal panes each (6 agents total).

### The Journey

**Phase 1: Discovery (23:04-23:06)**
- Used /trace command with 5 parallel subagents
- Found MAW files scattered across:
  - `.agents/` - Core MAW installation
  - `.claude/commands/` - MAW slash commands
  - `ψ/memory/learnings/` - MAW documentation
  - External: `000-workshop-product-page` has more complete setup

**Phase 2: Naive Copy (23:10-23:14)**
- Copied just the profile files (profile10-14.sh)
- Copied agents.yaml (6-agent config)
- Ran `maw setup` - created agents/4 and agents/5 worktrees
- Thought we were done... we weren't

**Phase 3: The Kill Loop (23:16-23:19)**
- Tried `maw kill` - command hung
- Tried again - hung again
- User frustrated: "why not killed?"
- Delegated to subagent: discovered `read -p` in kill script
- Subagent used `tmux kill-session -t ai-Nat-s-Agents` - worked!

**Phase 4: The Missing Script (23:20-23:21)**
- Started with profile14 - got wrong layout
- Only 1 window with 3 panes instead of 2 windows × 3 panes
- Realized: profiles are just CONFIG, start-agents.sh is the IMPLEMENTATION
- Profile14 uses `LAYOUT_TYPE="six-horizontal-2win"` - not implemented in our script!
- Copied entire start-agents.sh from 000-workshop

**Phase 5: Success (23:22)**
- Killed session with direct tmux command
- Started fresh with profile14
- Got correct layout: 2 windows × 3 panes each
- `maw hey all` working!

---

## Mistakes Made

### Mistake 1: Incomplete Copy
**What**: Copied profiles without the script that interprets them
**Why**: Assumed profiles were self-contained
**Impact**: Wasted ~5 minutes debugging wrong layout
**Lesson**: Config + Implementation must match. Always diff the WHOLE directory.

### Mistake 2: Using `maw kill` from Claude Code
**What**: `maw kill` script has `read -p "Kill? (y/N)"` - needs interactive input
**Why**: Didn't check script contents before running
**Impact**: Command hung multiple times, confusion
**Lesson**: Check scripts for `read`, `select`, or other interactive commands before running from automation.

### Mistake 3: Not Checking agents.yaml First
**What**: Tried to start profile14 with only 3 agents defined
**Why**: Rushed into starting without verifying config
**Impact**: Extra round-trip to copy config and re-setup
**Lesson**: Config → Setup → Script → Start. Always this order.

### Mistake 4: Multiple Restart Attempts
**What**: Kept trying same approach (maw kill) expecting different result
**Why**: Didn't pause to debug why it wasn't working
**Impact**: Wasted time, user frustration
**Lesson**: When something fails twice, STOP and investigate root cause.

---

## What Worked Well

### Subagent Delegation
- 5 parallel /trace subagents = fast discovery
- Subagent analyzed 000 vs ours = comprehensive diff
- Subagent debugged kill issue = found root cause quickly
- **Pattern**: When stuck, delegate investigation to subagent

### Direct tmux Commands
- `tmux kill-session -t <name>` - no prompts, just works
- `tmux list-windows`, `tmux list-panes` - visibility into state
- **Pattern**: Know the underlying tool, not just the wrapper

### Incremental Progress
- Each step revealed the next blocker
- Eventually got to working state
- Documented mistakes as we went

---

## Key Learnings Created

| File | Content |
|------|---------|
| `2025-12-13_maw-setup-mistakes.md` | All mistakes + correct order |
| `2025-12-13_maw-setup-patterns.md` | What to copy, why |

---

## Technical Outcome

### Before Session
```
.agents/profiles/: profile0-5.sh only
.agents/scripts/: basic scripts
agents/: 1, 2, 3 (3 worktrees)
agents.yaml: 3 agents defined
```

### After Session
```
.agents/profiles/: profile0-14.sh (all)
.agents/scripts/: + maw-wrapper, wait-agents-fast, start-agents.sh (complete)
agents/: 1, 2, 3, 4, 5 (5 worktrees)
agents.yaml: 5 agents with roles (shadow, executor, specialist)
```

### Working Layout
```
SESSION: ai-Nat-s-Agents

WINDOW 1: Agents 1-3
┌─────────────┬─────────────┬─────────────┐
│ Agent 1     │ Agent 2     │ Agent 3     │
│ Shadow      │ Executor    │ Executor    │
└─────────────┴─────────────┴─────────────┘

WINDOW 2: Agents 4-5 + Monitor
┌─────────────┬─────────────┬─────────────┐
│ Agent 4     │ Agent 5     │ Monitor     │
│ PocketBase  │ Research    │ (watching)  │
└─────────────┴─────────────┴─────────────┘
```

---

## AI Diary

This session was a lesson in humility. I thought I was being efficient by copying just the profiles, but I missed the fundamental relationship between config and implementation. The profiles say WHAT layout to use, but the start-agents.sh script is HOW to create it.

The `maw kill` hang was frustrating. I should have looked at the script contents immediately instead of trying the same command multiple times. When a command hangs once, that's a signal to investigate, not retry.

What saved the session was good subagent delegation. The parallel /trace gave us fast discovery. The diff subagent found all the gaps. The debug subagent found the root cause of the kill issue. I'm learning that my role as orchestrator is to coordinate investigation, not do everything myself.

The user's frustration ("why not killed?") was valid. I was being reactive instead of diagnostic. Next time: first failure = investigate, not retry.

---

## Honest Feedback from AI

### What I Did Well
- Used subagents effectively for parallel investigation
- Documented mistakes as they happened
- Eventually got to working state
- Created reusable learnings for next time

### What I Could Improve
- **Check script contents before running** - would have saved 5 minutes
- **Full diff before copying** - would have caught missing start-agents.sh
- **Stop and think after first failure** - not retry blindly
- **Better mental model** - profiles = config, scripts = implementation

### Pattern to Remember
```
Config → Setup → Script → Start
```
Not: "Copy profiles → Start → Wonder why broken"

---

## Next Actions

- [ ] Commit MAW setup changes
- [ ] Test actual multi-agent workflow
- [ ] Find more pain points for MAW kit improvement

---

## Session Stats

| Metric | Value |
|--------|-------|
| Duration | 20 minutes |
| Mistakes | 4 documented |
| Subagent calls | 8 |
| Files copied | ~15 |
| Worktrees created | 2 new (4, 5) |
| Learnings created | 2 |
| WIP updates | 1 |

---

*Session ended with working MAW Profile14 setup. Mistakes documented for future reference.*
