# Session: Schedule + DuckDB + Calendar Complete

**Date**: 2026-01-13 00:37-05:55 (5h 18min)
**Focus**: Calendar improvements + skills restoration

---

## What We Did

### 1. calendar.sh Evolution
- Fixed date alignment bug (copy `cal` output, don't retype)
- Added `[13]` today marker
- Added `·` busy / `°` free markers
- Full month annotations per week row
- IFS fix for bash word splitting

### 2. Schedule Architecture
- Created parse-schedule.sh → CSV converter
- ψ/data/schedule.csv as structured data
- DuckDB for efficient queries
- Time field captured (20:50, 14:00, etc.)

### 3. Skills Restored
- /recap v5.2 (484 lines) - was 107 lines
- /course (353 lines) - from archive
- Lost during commands→skills migration

### 4. Schedule Updates
- Jan 21: Marked free (was cancelled)
- NAT TALK: Confirmed @ V Community

---

## AI Diary

Late night → early morning session. User caught calendar bug instantly - good eyes. The "don't retype ASCII art" lesson is universal.

The DuckDB architecture pivot was user-driven and correct. Parsing schedule.md multiple times per day is wasteful. CSV + DuckDB = clean, queryable, efficient.

Skills restoration revealed 77% content loss during migration. Important to trace history when something feels "too simple."

---

## Honest Feedback

- ✅ User-driven improvements (alignment, markers, DuckDB)
- ✅ Quick iterations on calendar format
- ⚠️ IFS gotcha wasted time - should know bash better
- ⚠️ ANSI codes don't render in tool output

---

## Key Files

- `.claude/skills/schedule/scripts/calendar.sh`
- `.claude/skills/schedule/scripts/parse-schedule.sh`
- `ψ/data/schedule.csv`
- `.claude/skills/recap/skill.md` (restored)
- `.claude/skills/course/skill.md` (restored)

---

## Next Session

- [ ] Add time to annotations: `13@20:50✈️BKK`
- [ ] calendar.sh use CSV directly (not re-parse)
- [ ] Consider /jump skill restoration

---

**Flight today**: ✈️ CNX→BKK 20:50
