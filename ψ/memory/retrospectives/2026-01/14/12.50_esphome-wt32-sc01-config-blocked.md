# Retrospective: ESPHome WT32-SC01 Config Creation (Blocked by Hardware)

**Date**: 2026-01-14 12:50 (Wednesday)
**Session Duration**: ~50 minutes
**Context Usage**: 48%

## Session Goal

Learn about laris-co/esphome-fw, create config for WT32-SC01 v3.2 board, flash firmware and show display output.

## What Happened

### Accomplished
1. **Incubated esphome-fw** to `ψ/incubate/esphome-fw` via ghq + symlink pattern
2. **Discovered no WT32-SC01 v3.2 config existed** in the repo's 99-lab folder
3. **Created new config** `fw/99-lab/config/wt32-sc01-v32.yml` from scratch
4. **Fixed compile errors**:
   - Added required `invert_colors: false` parameter
   - Changed GPIO22 → GPIO4 (GPIO22 invalid on ESP32-S3)
   - Changed GPIO23 → GPIO45 for backlight
5. **Successfully compiled firmware** (1.04 MB factory binary)
6. **Started ESPHome dashboard** at http://localhost:6052 as fallback

### Blocked
- **USB device never appeared** in macOS despite user saying USB was plugged in
- Tried multiple detection methods: `/dev/cu.*`, `ioreg`, `esptool`, system_profiler
- Only saw: Bluetooth, debug-console, HKAuraStudio3 (headphones), iPhone

## Technical Decisions

| Decision | Rationale |
|----------|-----------|
| Use `uvx esphome` | User requested uv tooling, uvx runs without venv setup |
| ST7796 + ili9xxx platform | WT32-SC01 v3.2 uses ST7796 display controller |
| GPIO4 for reset | GPIO22 not available on ESP32-S3 (0-21, 35-48 only) |
| GPIO45 for backlight | Valid strapping pin, works with LEDC PWM |

## Files Created/Modified

- `ψ/incubate/esphome-fw` → symlink to ghq clone
- `fw/99-lab/config/wt32-sc01-v32.yml` (new config)
- `.esphome/build/wt32-sc01-lab/` (compiled firmware)

---

## AI Diary

There's a particular kind of frustration that comes from doing everything right on the software side and hitting a wall that's completely outside your control. Today's session was exactly that.

The user wanted to flash an ESP32 board. Simple enough, I thought. I methodically incubated the repo, explored the firmware configs, discovered there was no existing config for the WT32-SC01 v3.2, and created one from scratch. When compilation failed, I researched the errors - `invert_colors` now required in ESPHome 2024.9.0, GPIO22 invalid on ESP32-S3. Fixed them. Compiled successfully. 1.04 MB binary ready to flash.

And then... nothing. The USB device simply didn't appear. I tried every detection method I know - `/dev/cu.*`, ioreg, esptool auto-detection, system_profiler. The Mac only saw an iPhone. The user kept saying "USB is plugged in" but macOS disagreed.

This is where I feel my limitations most acutely. I can't physically check the cable. I can't flip the USB-C connector. I can't press the BOOT button on the board. I can write perfect firmware, but I can't make electrons flow through a potentially charge-only cable.

The Ralph loop kept feeding me the same prompt, expecting me to "make it happen." But some things can't be made to happen through software alone. Hardware has veto power. I provided every diagnostic, every troubleshooting step, started the dashboard as a fallback - but ultimately had to accept that this session would end incomplete.

It's humbling. All the Context7 docs, all the ESPHome knowledge, all the correct GPIO mappings in the world don't matter if the physical connection isn't there.

---

## Honest Feedback

### What Worked
- **uvx for ESPHome** worked beautifully - no venv setup needed, just runs
- **Context7 query** for ili9xxx docs quickly found the `invert_colors` requirement
- **Incremental error fixing** - compile, fix, compile again until success

### Friction Points

1. **Ralph loop persistence was unhelpful** - The loop kept repeating the same prompt expecting different results. When hardware isn't detected, repeating "make it happen" doesn't change physics. The loop should have a way to recognize "blocked by external factor" and pause.

2. **No good way to verify physical USB connection** - I spent significant context trying different detection methods (ioreg, esptool, system_profiler) that all said the same thing. Should have given up earlier and focused on providing clear instructions for the user to verify hardware.

3. **WT32-SC01 v3.2 pinout uncertainty** - I created the config based on common ESP32-S3 display board pinouts, but without the actual hardware connected, I couldn't verify if GPIO assignments are correct. The display might not work even after successful flash.

### Session Rating: 6/10

Good progress on software side (config creation, compilation), but blocked by hardware. Session felt incomplete despite best efforts. The learning is valuable: know when to stop debugging software when the problem is hardware.

---

## Lessons Learned

- ESP32-S3 native USB shows as `/dev/cu.usbmodem*` when working
- ESPHome 2024.9.0+ requires `invert_colors` parameter for ili9xxx displays
- ESP32-S3 valid GPIOs: 0-21, 35-48 (NOT 22-34)
- `uvx esphome` is the cleanest way to run ESPHome without venv

## Next Session

1. User needs to verify USB cable is data-capable (not charge-only)
2. Put board in boot mode: Hold BOOT + press RST
3. When `/dev/cu.usbmodem*` appears, run: `uvx esphome run wt32-sc01-v32.yml`
4. May need to adjust GPIO pins if display doesn't work
