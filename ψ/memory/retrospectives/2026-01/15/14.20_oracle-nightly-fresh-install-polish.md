# Oracle Nightly Fresh Install Polish Session

**Date**: 2026-01-15 14:20 (Thursday)
**Duration**: ~2 hours (12:07 - 14:20)
**Context**: Polishing Oracle Nightly fresh install experience

## Session Summary

Continuation of Oracle Nightly public release - focused on making the fresh install experience bulletproof. Fixed multiple issues discovered during remote testing on .184, added AlchemyCat origin story to timeline, and documented the full installation workflow.

## Commits This Session

### oracle-v2 (7 commits)
| Hash | Description |
|------|-------------|
| `7af9b8c` | chore: Rename frontend title to Oracle Nightly |
| `dd3c86a` | fix: Build frontend during fresh install |
| `603c0b2` | feat: Show all dashboard URLs (localhost, hostname, IPs) |
| `8163d0d` | fix: Exclude Playwright tests from bun test |
| `ff97c08` | docs: Add AlchemyCat origins to timeline (May-June 2025) |
| (earlier) | Multiple docs and install script commits |

### Nat-s-Agents (from previous session)
| Hash | Description |
|------|-------------|
| `29720f39` | rrr: oracle-nightly-complete-release + lesson learned |
| `370d0c1b` | learn: Oracle Nightly v0.2.1 public release session |

## What Got Fixed

### 1. Playwright Test Conflict
**Problem**: `bun test` picked up Playwright E2E tests, causing `test.describe()` error
**Fix**: Added `bunfig.toml` with `root = "src"` to limit test scope
**File**: `bunfig.toml` (new)

### 2. Missing Frontend Build
**Problem**: Dashboard blank page - MIME type error for missing JS/CSS
**Cause**: `frontend/dist/assets/` not in git (only index.html committed)
**Fix**: Added frontend build step to `fresh-install.sh`
```bash
cd frontend && bun install && bun run build && cd ..
```

### 3. Single URL Display
**Problem**: Only showed `http://localhost:47778`
**Fix**: Show all available URLs (hostname, IP addresses)
**Benefit**: Remote users know how to access from other machines

### 4. Generic Title
**Problem**: Browser tab showed "frontend"
**Fix**: Changed to "Oracle Nightly"

### 5. Timeline Missing Origin
**Problem**: TIMELINE.md started at Sept 2025, missing AlchemyCat origin
**Fix**: Added Phase -1 (May-June 2025) and Phase -0.5 (Processing Period)
**Key insight**: "From pain to philosophy to production"

## Technical Discoveries

### MCP Auto-Start Pattern (from claude-mem)
```typescript
// src/index.ts:2286 - MCP server startup
await ensureServerRunning({ background: true, timeout: 5000 });
```

Oracle-v2 already has claude-mem's daemon pattern:
1. MCP tool called â†’ MCP server starts
2. `ensureServerRunning()` auto-starts HTTP server in background
3. Dashboard available without manual `bun run server`

### Claude MCP Commands
```bash
claude mcp add oracle-v2 -- bun run ~/.local/share/oracle-v2/src/index.ts
claude mcp remove oracle-v2
claude mcp list
```

## AI Diary

This session was about the last mile - the difference between "it works on my machine" and "anyone can install this." Every fix felt small but essential.

The Playwright test conflict was the most frustrating. The error message was cryptic ("test.describe() not expected here") and took investigation to understand that Bun was trying to run Playwright tests as Bun tests. The fix was trivial (one config file) but finding it required understanding both test runners.

The frontend build issue was embarrassing. I'd tested the dashboard locally where it was already built, but fresh installs got a blank page. The MIME type error was the clue - the server was returning index.html for JavaScript requests because the JS files didn't exist. Git had only the static files, not the built bundles.

Adding AlchemyCat to the timeline felt like completing a circle. The TIMELINE.md now starts with "Phase -1: AlchemyCat Origins" - acknowledging that Oracle wasn't born from theory but from pain. "Efficient but exhausting... never knew if satisfied." Those words from June 2025 are why we built Oracle.

The session ended with a satisfying loop: User asks "not claude mcp add?" and I realized I'd been over-complicating the install instructions. The CLI has proper commands for this. Sometimes the answer is simpler than you think.

## Honest Feedback

### What Worked
1. **Incremental fixing** - Each bug led to a focused commit
2. **Remote testing** - .184 caught real installation issues
3. **Documentation-driven development** - Fixed what the docs promised

### Friction Points

1. **SSH unreliability** - Commands failed with exit 255 but sometimes worked. The nvm hash warning cluttered output. Had to give manual commands instead of running via SSH.

2. **Git tracking confusion** - Assumed frontend/dist was fully committed because index.html was there. Lesson: check what's actually tracked, not what exists locally.

3. **Context compaction timing** - Session compacted at 33% which lost the earlier flow. The install script evolution across multiple sessions is harder to trace.

### Ideas for Future
- Add `--no-frontend` flag to install script for headless servers
- Consider pre-building and committing dist/assets to avoid build step
- Add health check to install script to verify dashboard works

## Session Stats

| Metric | Value |
|--------|-------|
| Duration | ~2 hours |
| oracle-v2 commits | 7 |
| Files modified | 5 |
| Tests passing | 97 |
| Fresh installs tested | 3+ |

## Key Learnings

1. **Test fresh installs on fresh machines** - Local dev environment lies
2. **Check what git actually tracks** - `git ls-files` > `ls`
3. **Auto-start patterns exist** - `ensureServerRunning()` is already there
4. **CLI commands > manual config** - `claude mcp add` simpler than editing JSON
5. **Origin stories matter** - Timeline should start from the pain point

## The Arc

```
Morning:   Oracle Nightly released to Soul-Brews-Studio
Midday:    Remote testing reveals gaps
Afternoon: Polish fresh install experience
Now:       Anyone can install with one curl command
```

## Quick Reference

### Fresh Install
```bash
curl -sSL https://raw.githubusercontent.com/Soul-Brews-Studio/oracle-v2/main/scripts/fresh-install.sh | bash
```

### MCP Setup
```bash
claude mcp add oracle-v2 -- bun run ~/.local/share/oracle-v2/src/index.ts
```

### Uninstall
```bash
rm -rf ~/.local/share/oracle-v2 ~/.oracle-v2
claude mcp remove oracle-v2
```

---

*Rich retrospective for Oracle Nightly fresh install polish session*
*Session conducted by Claude Opus 4.5*
*Context: 68% at session end*
